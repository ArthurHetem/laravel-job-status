import{c as P,Q as j,b as V,d as w}from"./index.416c10b7.js";import{Q as l,b as v,c as k,d as R}from"./QItem.8e917815.js";import{h as $}from"./QPagination.6eb9fd1c.js";import{Q as m,R as B}from"./QBtn.e5691bad.js";import{Q as A}from"./QPage.edb823d8.js";import{S as u}from"./StatusCount.c6c9d9e0.js";import{H as S,I as o,J as i,K as t,d as e,P as g,N as I,Q as n,L as q,r as b,w as F,o as U,k as z,M as f,F as D,R as E,A as N}from"./index.02176f2b.js";import"./render.bb221d47.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./position-engine.2625858a.js";import"./selection.02425b78.js";const H={class:"text-weight-medium"},M={key:0,class:"text-grey-8"},T={class:"text-grey-8 q-gutter-xs"},K=S({__name:"TrackedJobListItem",props:{trackedJob:null},setup(h){const a=h;return(d,s)=>(o(),i(k,{clickable:"",to:{path:"/jobs/"+a.trackedJob.alias}},{default:t(()=>[e(l,{avatar:"",top:""},{default:t(()=>[e(m,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(l,{top:""},{default:t(()=>[e(v,{lines:"1"},{default:t(()=>{var r;return[g("span",H,I((r=a.trackedJob.alias)!=null?r:a.trackedJob.class),1),a.trackedJob.alias!==a.trackedJob.class?(o(),n("span",M," - "+I(a.trackedJob.class),1)):q("",!0)]}),_:1}),e(v,{caption:"",lines:"5"},{default:t(()=>[e(u,{count:a.trackedJob.queued,label:"Queued",color:"primary"},null,8,["count"]),e(u,{count:a.trackedJob.queued,label:"Running",color:"info"},null,8,["count"]),e(u,{count:a.trackedJob.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(u,{count:a.trackedJob.failed,label:"Failed",color:"negative"},null,8,["count"]),e(u,{count:a.trackedJob.successful,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(l,{top:"",side:""},{default:t(()=>[g("div",T,[e(m,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),G={key:0},O={class:"q-pa-lg flex flex-center"},W={key:1},X={key:2},ie=S({__name:"JobListPage",setup(h){const a=b(null),d=b(1);F(d,(c,_)=>{r()});const s=b(null);function r(){s.value!==null&&s.value.stop(),s.value=P.jobs.search().page(d.value).bypassAuth().listen().onUpdated(c=>a.value=c).start()}U(()=>r()),z(()=>{s.value!==null&&s.value.stop()});function C(c){return c.class}return(c,_)=>(o(),i(A,{class:"justify-evenly",padding:""},{default:t(()=>[e(V,null,{default:t(()=>[e(j,{icon:"list",to:"/jobs",label:"Jobs"}),e(j,{to:"/jobs",label:"List Jobs"})]),_:1}),e(R,{class:"rounded-borders q-pa-lg"},{default:t(()=>{var J,x,y,Q,L;return[e(v,{header:""},{default:t(()=>[f("All Jobs")]),_:1}),((J=a.value)==null?void 0:J.total)>0?(o(),n("div",G,[e(w),(o(!0),n(D,null,E((y=(x=a.value)==null?void 0:x.data)!=null?y:[],p=>(o(),n("div",{key:C(p)},[e(K,{"tracked-job":p},null,8,["tracked-job"]),e(w)]))),128)),g("div",O,[((Q=a.value)==null?void 0:Q.total)>0?(o(),i($,{key:0,input:"","model-value":a.value.current_page,"onUpdate:modelValue":_[0]||(_[0]=p=>d.value=p),max:a.value.last_page},null,8,["model-value","max"])):q("",!0)])])):((L=a.value)==null?void 0:L.total)===0?(o(),n("div",W,[N((o(),i(k,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(m,{color:"negative",name:"warning"})]),_:1}),e(l,null,{default:t(()=>[f("No jobs found")]),_:1})]),_:1})),[[B]])])):(o(),n("div",X,[N((o(),i(k,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(m,{color:"primary",name:"sync"})]),_:1}),e(l,null,{default:t(()=>[f("Loading")]),_:1})]),_:1})),[[B]])]))]}),_:1})]),_:1}))}});export{ie as default};
