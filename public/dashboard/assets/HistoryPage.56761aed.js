import{c as w,Q as S,a as C,b as y}from"./index.d9d91bd7.js";import{Q as f,b as g,c as B,d as z}from"./QItem.7d79cd3c.js";import{Q as R}from"./QPage.f37ce4a6.js";import{Q as m}from"./use-router-link.06d73f40.js";import{Q as L}from"./QCircularProgress.55c42275.js";import{Q as i}from"./QChip.fbc22dd2.js";import{S as p}from"./api.9a3f3035.js";import{d as x}from"./dayjs.min.29daf272.js";import{r as N}from"./relativeTime.41e30fc0.js";import{J as v,c as Q,K as a,L as r,M as t,d as s,$ as n,N as I,O as l,P as o,Q as c,r as M,o as P,k as V,R as b,S as $,F as j}from"./index.370ff9cd.js";import"./render.258f2d26.js";import"./index.b7f28e66.js";import"./format.801e7424.js";const q={class:"text-weight-medium"},F={class:"text-grey-8"},T={class:"text-grey-8 q-gutter-xs"},A=v({__name:"NoContextTrackedRunListItem",props:{trackedRun:null},setup(h){const e=h;x.extend(N);const _=Q(()=>x().to(e.trackedRun.created_at)),d=Q(()=>{let u=1,k=e.trackedRun;for(;k.parent!==null;)k=k.parent,u++;return u});return(u,k)=>(a(),r(B,{clickable:"",to:{path:"/run/"+e.trackedRun.id}},{default:t(()=>[s(f,{avatar:"",top:""},{default:t(()=>[e.trackedRun.status===n(p).Queued?(a(),r(m,{key:0,name:"hourglass_top",color:"black",size:"34px"})):e.trackedRun.status===n(p).Started?(a(),r(L,{key:1,"show-value":"",value:e.trackedRun.percentage,rounded:"",size:"34px",class:"q-ma-md"},null,8,["value"])):e.trackedRun.status===n(p).Succeeded?(a(),r(m,{key:2,name:"done",color:"black",size:"34px"})):e.trackedRun.status===n(p).Failed?(a(),r(m,{key:3,name:"close",color:"black",size:"34px"})):e.trackedRun.status===n(p).Cancelled?(a(),r(m,{key:4,name:"not_interested",color:"black",size:"34px"})):I("",!0)]),_:1}),s(f,{top:"",class:"col-2 gt-sm"},{default:t(()=>[s(g,{class:"q-mt-sm"},{default:t(()=>[l(o(n(_)),1)]),_:1})]),_:1}),s(f,{top:""},{default:t(()=>[s(g,{lines:"1"},{default:t(()=>[c("span",q,o(e.trackedRun.alias),1),c("span",F," - "+o(e.trackedRun.status),1)]),_:1}),s(g,{caption:""},{default:t(()=>[c("span",null,[e.trackedRun.messages.length===0?(a(),r(i,{key:0,dense:"",icon:"chat"},{default:t(()=>[l("Messages: "+o(e.trackedRun.messages.length),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"blue","text-color":"white",icon:"chat"},{default:t(()=>[l(" Messages: "+o(e.trackedRun.messages.length),1)]),_:1}))]),c("span",null,[e.trackedRun.signals.length===0?(a(),r(i,{key:0,dense:"",icon:"sensors"},{default:t(()=>[l("Signals: "+o(e.trackedRun.signals.length),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"red","text-color":"white",icon:"sensors"},{default:t(()=>[l(" Signals: "+o(e.trackedRun.signals.length),1)]),_:1}))]),c("span",null,[n(d)===1?(a(),r(i,{key:0,dense:"",icon:"replay"},{default:t(()=>[l("Retries: "+o(n(d)-1),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"orange","text-color":"white",icon:"replay"},{default:t(()=>[l(" Retries: "+o(n(d)-1),1)]),_:1}))])]),_:1})]),_:1}),s(f,{top:"",side:""},{default:t(()=>[c("div",T,[s(m,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),E={class:"row"},H={class:"col-12"},se=v({__name:"HistoryPage",setup(h){const e=M(null);return P(()=>{let _=w.runs.search().bypassAuth().listen().onUpdated(d=>e.value=d).start();V(()=>{_.stop()})}),(_,d)=>e.value!==null?(a(),r(R,{key:0,class:"justify-evenly",padding:""},{default:t(()=>[s(C,null,{default:t(()=>[s(S,{icon:"manage_search",to:"/history",label:"History"})]),_:1}),c("div",E,[c("div",H,[s(z,{bordered:"",class:"rounded-borders",style:{"min-width":"85%"}},{default:t(()=>[s(g,{header:""},{default:t(()=>[l("Runs")]),_:1}),s(y),(a(!0),b(j,null,$(e.value,u=>(a(),b("div",{key:u.id},[s(A,{"tracked-run":u},null,8,["tracked-run"]),s(y)]))),128))]),_:1})])])]),_:1})):(a(),r(R,{key:1,class:"items-center justify-evenly"},{default:t(()=>[l(" Loading ")]),_:1}))}});export{se as default};
