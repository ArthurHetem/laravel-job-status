import{c as $,Q as j,b as C,d as w}from"./index.0765c7d6.js";import{Q as l,b as v,c as k,d as R}from"./QItem.838b44dd.js";import{h as S}from"./QPagination.2b2d2667.js";import{Q as _,R as B}from"./QBtn.909acc4d.js";import{Q as A}from"./QPage.f4d613d9.js";import{_ as u}from"./StatusCount.5938d603.js";import{H as q,I as o,J as i,K as t,d as e,P as g,N as I,Q as r,L as P,r as b,w as F,o as U,k as z,M as f,F as D,R as E,A as N}from"./index.8fadfd86.js";import"./render.884adf56.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./QAvatar.98f4e4b6.js";import"./position-engine.838a34f5.js";import"./selection.739245eb.js";const H={class:"text-weight-medium"},M={key:0,class:"text-grey-8"},T={class:"text-grey-8 q-gutter-xs"},K=q({__name:"TrackedJobListItem",props:{trackedJob:null},setup(h){const a=h;return(d,s)=>(o(),i(k,{clickable:"",to:{path:"/jobs/"+a.trackedJob.alias}},{default:t(()=>[e(l,{avatar:"",top:""},{default:t(()=>[e(_,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(l,{top:""},{default:t(()=>[e(v,{lines:"1"},{default:t(()=>{var n;return[g("span",H,I((n=a.trackedJob.alias)!=null?n:a.trackedJob.class),1),a.trackedJob.alias!==a.trackedJob.class?(o(),r("span",M," - "+I(a.trackedJob.class),1)):P("",!0)]}),_:1}),e(v,{caption:"",lines:"5"},{default:t(()=>[e(u,{count:a.trackedJob.queued,label:"Queued",color:"primary"},null,8,["count"]),e(u,{count:a.trackedJob.queued,label:"Running",color:"info"},null,8,["count"]),e(u,{count:a.trackedJob.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(u,{count:a.trackedJob.failed,label:"Failed",color:"negative"},null,8,["count"]),e(u,{count:a.trackedJob.successful,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(l,{top:"",side:""},{default:t(()=>[g("div",T,[e(_,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),G={key:0},O={class:"q-pa-lg flex flex-center"},W={key:1},X={key:2},de=q({__name:"JobListPage",setup(h){const a=b(null),d=b(1);F(d,(c,m)=>{n()});const s=b(null);function n(){s.value!==null&&s.value.stop(),s.value=$.jobs.search().page(d.value).bypassAuth().listen().onUpdated(c=>a.value=c).start()}U(()=>n()),z(()=>{s.value!==null&&s.value.stop()});function V(c){return c.class}return(c,m)=>(o(),i(A,{class:"justify-evenly",padding:""},{default:t(()=>[e(C,null,{default:t(()=>[e(j,{icon:"list",to:"/jobs",label:"Jobs"}),e(j,{to:"/jobs",label:"List Jobs"})]),_:1}),e(R,{class:"rounded-borders q-pa-lg"},{default:t(()=>{var J,x,y,Q,L;return[e(v,{header:""},{default:t(()=>[f("All Jobs")]),_:1}),((J=a.value)==null?void 0:J.total)>0?(o(),r("div",G,[e(w),(o(!0),r(D,null,E((y=(x=a.value)==null?void 0:x.data)!=null?y:[],p=>(o(),r("div",{key:V(p)},[e(K,{"tracked-job":p},null,8,["tracked-job"]),e(w)]))),128)),g("div",O,[((Q=a.value)==null?void 0:Q.total)>0?(o(),i(S,{key:0,input:"","model-value":a.value.current_page,"onUpdate:modelValue":m[0]||(m[0]=p=>d.value=p),max:a.value.last_page},null,8,["model-value","max"])):P("",!0)])])):((L=a.value)==null?void 0:L.total)===0?(o(),r("div",W,[N((o(),i(k,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{color:"negative",name:"warning"})]),_:1}),e(l,null,{default:t(()=>[f("No jobs found")]),_:1})]),_:1})),[[B]])])):(o(),r("div",X,[N((o(),i(k,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{color:"primary",name:"sync"})]),_:1}),e(l,null,{default:t(()=>[f("Loading")]),_:1})]),_:1})),[[B]])]))]}),_:1})]),_:1}))}});export{de as default};
