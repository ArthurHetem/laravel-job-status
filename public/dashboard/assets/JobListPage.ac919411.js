import{c as V,Q as j,b as C,d as w}from"./index.83f99f50.js";import{Q as o,b as m,c as g,d as R}from"./QItem.dcd4c4f4.js";import{h as S}from"./QPagination.c4511e7a.js";import{Q as f,R as B}from"./QBtn.979ea799.js";import{Q as $}from"./QPage.84ce31a0.js";import{_ as c}from"./StatusCount.685f9613.js";import{H as N,I as l,J as i,K as a,d as e,M as _,N as q,P as k,r as v,w as A,o as F,k as U,Q as u,F as z,R as D,L as E,A as I}from"./index.2bf9fada.js";import"./render.b499f923.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./QAvatar.44e1523c.js";import"./position-engine.6ccc032f.js";import"./selection.4b965651.js";const H={class:"text-weight-medium"},M={class:"text-grey-8 q-gutter-xs"},T=N({__name:"TrackedJobListItem",props:{trackedJob:null},setup(h){const t=h;return(d,s)=>(l(),i(g,{clickable:"",to:{path:"/jobs/"+t.trackedJob.alias}},{default:a(()=>[e(o,{avatar:"",top:""},{default:a(()=>[e(f,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(o,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(m,{class:"q-mt-sm"},{default:a(()=>[_(q(t.trackedJob.class),1)]),_:1})]),_:1}),e(o,{top:""},{default:a(()=>[e(m,{lines:"1"},{default:a(()=>{var n;return[k("span",H,q((n=t.trackedJob.alias)!=null?n:t.trackedJob.class),1)]}),_:1}),e(m,{caption:"",lines:"5"},{default:a(()=>[e(c,{count:t.trackedJob.queued,label:"Queued",color:"primary"},null,8,["count"]),e(c,{count:t.trackedJob.queued,label:"Running",color:"info"},null,8,["count"]),e(c,{count:t.trackedJob.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(c,{count:t.trackedJob.failed,label:"Failed",color:"negative"},null,8,["count"]),e(c,{count:t.trackedJob.successful,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(o,{top:"",side:""},{default:a(()=>[k("div",M,[e(f,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),K={key:0},G={class:"q-pa-lg flex flex-center"},O={key:1},W={key:2},ie=N({__name:"JobListPage",setup(h){const t=v(null),d=v(1);A(d,(r,b)=>{n()});const s=v(null);function n(){s.value!==null&&s.value.stop(),s.value=V.jobs.search().page(d.value).bypassAuth().listen().onUpdated(r=>t.value=r).start()}F(()=>n()),U(()=>{s.value!==null&&s.value.stop()});function P(r){return r.class}return(r,b)=>(l(),i($,{class:"justify-evenly",padding:""},{default:a(()=>[e(C,null,{default:a(()=>[e(j,{icon:"list",to:"/jobs",label:"Jobs"}),e(j,{to:"/jobs",label:"List Jobs"})]),_:1}),e(R,{class:"rounded-borders q-pa-lg"},{default:a(()=>{var J,Q,x,y,L;return[e(m,{header:""},{default:a(()=>[_("All Jobs")]),_:1}),((J=t.value)==null?void 0:J.total)>0?(l(),u("div",K,[e(w),(l(!0),u(z,null,D((x=(Q=t.value)==null?void 0:Q.data)!=null?x:[],p=>(l(),u("div",{key:P(p)},[e(T,{"tracked-job":p},null,8,["tracked-job"]),e(w)]))),128)),k("div",G,[((y=t.value)==null?void 0:y.total)>0?(l(),i(S,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":b[0]||(b[0]=p=>d.value=p),max:t.value.last_page},null,8,["model-value","max"])):E("",!0)])])):((L=t.value)==null?void 0:L.total)===0?(l(),u("div",O,[I((l(),i(g,{clickable:""},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(f,{color:"negative",name:"warning"})]),_:1}),e(o,null,{default:a(()=>[_("No jobs found")]),_:1})]),_:1})),[[B]])])):(l(),u("div",W,[I((l(),i(g,{clickable:""},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(f,{color:"primary",name:"sync"})]),_:1}),e(o,null,{default:a(()=>[_("Loading")]),_:1})]),_:1})),[[B]])]))]}),_:1})]),_:1}))}});export{ie as default};
