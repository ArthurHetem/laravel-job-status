import{c as j,Q as B,a as I,b as h}from"./index.5cf4decf.js";import{Q as m,b as p,c as L,d as q}from"./QItem.30ccef15.js";import{Q}from"./QPage.446b7c70.js";import{Q as J}from"./use-router-link.b1fd7710.js";import{S as l}from"./api.9a3f3035.js";import{_ as n}from"./StatusCount.226fcb60.js";import{H as C,c as r,I as u,J as _,K as a,d as e,M as b,N as y,P as x,W as c,r as w,o as F,k as N,Q as v,R as P,F as V}from"./index.755deef1.js";import"./render.862fbab2.js";import"./index.b7f28e66.js";import"./QAvatar.587a22a6.js";import"./QChip.7830a481.js";const z={class:"text-weight-medium"},A={class:"text-grey-8 q-gutter-xs"},E=C({__name:"TrackedJobListItem",props:{trackedJob:null},setup(k){const t=k,f=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Failed).length),o=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Started).length),d=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Queued).length),i=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Cancelled).length),S=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Succeeded).length);return(s,H)=>(u(),_(L,{clickable:"",to:{path:"/jobs/"+t.trackedJob.alias}},{default:a(()=>[e(m,{avatar:"",top:""},{default:a(()=>[e(J,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(m,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(p,{class:"q-mt-sm"},{default:a(()=>[b(y(t.trackedJob.class),1)]),_:1})]),_:1}),e(m,{top:""},{default:a(()=>[e(p,{lines:"1"},{default:a(()=>{var g;return[x("span",z,y((g=t.trackedJob.alias)!=null?g:t.trackedJob.class),1)]}),_:1}),e(p,{caption:"",lines:"5"},{default:a(()=>[e(n,{count:c(d),label:"Queued",color:"primary"},null,8,["count"]),e(n,{count:c(o),label:"Running",color:"info"},null,8,["count"]),e(n,{count:c(i),label:"Cancelled",color:"warning"},null,8,["count"]),e(n,{count:c(f),label:"Failed",color:"negative"},null,8,["count"]),e(n,{count:c(S),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(m,{top:"",side:""},{default:a(()=>[x("div",A,[e(J,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y=C({__name:"JobListPage",setup(k){const t=w(null);F(()=>{let o=j.jobs.search().bypassAuth().listen().onUpdated(d=>t.value=d).start();N(()=>{o.stop()})});function f(o){return o.class}return(o,d)=>t.value!==null?(u(),_(Q,{key:0,class:"justify-evenly"},{default:a(()=>[e(I,null,{default:a(()=>[e(B,{icon:"list",to:"/jobs",label:"Jobs"})]),_:1}),e(q,{class:"rounded-borders q-pa-lg"},{default:a(()=>[e(p,{header:""},{default:a(()=>[b("All Jobs")]),_:1}),e(h),(u(!0),v(V,null,P(t.value,i=>(u(),v("div",{key:f(i)},[e(E,{"tracked-job":i},null,8,["tracked-job"]),e(h)]))),128))]),_:1})]),_:1})):(u(),_(Q,{key:1,class:"items-center justify-evenly"},{default:a(()=>[b(" Loading ")]),_:1}))}});export{Y as default};
