import{c as v,Q as L,a as S,b as f}from"./index.d9d91bd7.js";import{Q as l,b as n,c as w,d as I}from"./QItem.7d79cd3c.js";import{Q as h}from"./QPage.f37ce4a6.js";import{Q as b}from"./use-router-link.06d73f40.js";import{_ as s}from"./StatusCount.abd43629.js";import{d as r}from"./dayjs.min.29daf272.js";import{l as q}from"./localizedFormat.0318e0ed.js";import{r as F}from"./relativeTime.41e30fc0.js";import{J as k,c as g,K as c,L as m,M as a,d as t,O as p,P as Q,$ as x,Q as y,r as N,o as j,k as z,R as B,S as A,F as C}from"./index.370ff9cd.js";import"./render.258f2d26.js";import"./index.b7f28e66.js";import"./QAvatar.13efa80e.js";import"./QChip.fbc22dd2.js";const P={class:"text-weight-medium"},T={class:"text-grey-8 q-gutter-xs"},V=k({__name:"BatchListItem",props:{batch:null},setup(_){const e=_;r.extend(F),r.extend(q);const u=g(()=>r().to(e.batch.created_at)),o=g(()=>e.batch.name!==null&&e.batch.name!==""?e.batch.name:"Batch dispatched at "+r(e.batch.created_at).format("L LTS"));return(i,d)=>(c(),m(w,{clickable:"",to:{path:"/batch/"+e.batch.id}},{default:a(()=>[t(l,{avatar:"",top:""},{default:a(()=>[t(b,{name:"group_work",color:"black",size:"34px"})]),_:1}),t(l,{top:"",class:"col-2 gt-sm"},{default:a(()=>[t(n,{class:"q-mt-sm"},{default:a(()=>[p(Q(x(u)),1)]),_:1})]),_:1}),t(l,{top:""},{default:a(()=>[t(n,{lines:"1"},{default:a(()=>[y("span",P,Q(x(o)),1)]),_:1}),t(n,{caption:"",lines:"5"},{default:a(()=>[t(s,{count:e.batch.queued,label:"Queued",color:"primary"},null,8,["count"]),t(s,{count:e.batch.started,label:"Running",color:"info"},null,8,["count"]),t(s,{count:e.batch.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),t(s,{count:e.batch.failed,label:"Failed",color:"negative"},null,8,["count"]),t(s,{count:e.batch.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),t(l,{top:"",side:""},{default:a(()=>[y("div",T,[t(b,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y=k({__name:"BatchListPage",setup(_){const e=N(null);j(()=>{let o=v.batches.search().bypassAuth().listen().onUpdated(i=>e.value=i).start();z(()=>{o.stop()})});function u(o){return o.batch_id}return(o,i)=>e.value!==null?(c(),m(h,{key:0,class:"justify-evenly"},{default:a(()=>[t(S,null,{default:a(()=>[t(L,{icon:"list",to:"/batch",label:"Batches"})]),_:1}),t(I,{class:"rounded-borders q-pa-lg"},{default:a(()=>[t(n,{header:""},{default:a(()=>[p("All Batches")]),_:1}),t(f),(c(!0),B(C,null,A(e.value,d=>(c(),B("div",{key:u(d)},[t(V,{batch:d},null,8,["batch"]),t(f)]))),128))]),_:1})]),_:1})):(c(),m(h,{key:1,class:"items-center justify-evenly"},{default:a(()=>[p(" Loading ")]),_:1}))}});export{Y as default};
