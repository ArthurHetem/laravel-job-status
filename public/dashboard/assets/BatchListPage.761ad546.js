import{c as v,Q as L,a as I,b as f}from"./index.5cf4decf.js";import{Q as l,b as n,c as w,d as N}from"./QItem.30ccef15.js";import{Q as h}from"./QPage.446b7c70.js";import{Q as b}from"./use-router-link.b1fd7710.js";import{_ as s}from"./StatusCount.226fcb60.js";import{d as r}from"./dayjs.min.2a981a07.js";import{l as S}from"./localizedFormat.dc5bf0f6.js";import{r as q}from"./relativeTime.9493b69e.js";import{H as k,c as g,I as c,J as m,K as a,d as t,M as p,N as Q,W as x,P as y,r as F,o as j,k as z,Q as B,R as A,F as C}from"./index.755deef1.js";import"./render.862fbab2.js";import"./index.b7f28e66.js";import"./QAvatar.587a22a6.js";import"./QChip.7830a481.js";const P={class:"text-weight-medium"},T={class:"text-grey-8 q-gutter-xs"},V=k({__name:"BatchListItem",props:{batch:null},setup(_){const e=_;r.extend(q),r.extend(S);const u=g(()=>r().to(e.batch.created_at)),o=g(()=>e.batch.name!==null&&e.batch.name!==""?e.batch.name:"Batch dispatched at "+r(e.batch.created_at).format("L LTS"));return(i,d)=>(c(),m(w,{clickable:"",to:{path:"/batch/"+e.batch.id}},{default:a(()=>[t(l,{avatar:"",top:""},{default:a(()=>[t(b,{name:"group_work",color:"black",size:"34px"})]),_:1}),t(l,{top:"",class:"col-2 gt-sm"},{default:a(()=>[t(n,{class:"q-mt-sm"},{default:a(()=>[p(Q(x(u)),1)]),_:1})]),_:1}),t(l,{top:""},{default:a(()=>[t(n,{lines:"1"},{default:a(()=>[y("span",P,Q(x(o)),1)]),_:1}),t(n,{caption:"",lines:"5"},{default:a(()=>[t(s,{count:e.batch.queued,label:"Queued",color:"primary"},null,8,["count"]),t(s,{count:e.batch.started,label:"Running",color:"info"},null,8,["count"]),t(s,{count:e.batch.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),t(s,{count:e.batch.failed,label:"Failed",color:"negative"},null,8,["count"]),t(s,{count:e.batch.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),t(l,{top:"",side:""},{default:a(()=>[y("div",T,[t(b,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y=k({__name:"BatchListPage",setup(_){const e=F(null);j(()=>{let o=v.batches.search().bypassAuth().listen().onUpdated(i=>e.value=i).start();z(()=>{o.stop()})});function u(o){return o.batch_id}return(o,i)=>e.value!==null?(c(),m(h,{key:0,class:"justify-evenly"},{default:a(()=>[t(I,null,{default:a(()=>[t(L,{icon:"list",to:"/batch",label:"Batches"})]),_:1}),t(N,{class:"rounded-borders q-pa-lg"},{default:a(()=>[t(n,{header:""},{default:a(()=>[p("All Batches")]),_:1}),t(f),(c(!0),B(C,null,A(e.value,d=>(c(),B("div",{key:u(d)},[t(V,{batch:d},null,8,["batch"]),t(f)]))),128))]),_:1})]),_:1})):(c(),m(h,{key:1,class:"items-center justify-evenly"},{default:a(()=>[p(" Loading ")]),_:1}))}});export{Y as default};
