import{c as j,Q as B,a as L,b as h}from"./index.d9d91bd7.js";import{Q as m,b as p,c as I,d as q}from"./QItem.7d79cd3c.js";import{Q}from"./QPage.f37ce4a6.js";import{Q as J}from"./use-router-link.06d73f40.js";import{S as l}from"./api.9a3f3035.js";import{_ as n}from"./StatusCount.abd43629.js";import{J as C,c as r,K as u,L as _,M as a,d as e,O as b,P as y,Q as x,$ as c,r as w,o as F,k as N,R as v,S as P,F as V}from"./index.370ff9cd.js";import"./render.258f2d26.js";import"./index.b7f28e66.js";import"./QAvatar.13efa80e.js";import"./QChip.fbc22dd2.js";const $={class:"text-weight-medium"},z={class:"text-grey-8 q-gutter-xs"},A=C({__name:"TrackedJobListItem",props:{trackedJob:null},setup(k){const t=k,f=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Failed).length),o=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Started).length),d=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Queued).length),i=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Cancelled).length),S=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Succeeded).length);return(s,E)=>(u(),_(I,{clickable:"",to:{path:"/jobs/"+t.trackedJob.alias}},{default:a(()=>[e(m,{avatar:"",top:""},{default:a(()=>[e(J,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(m,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(p,{class:"q-mt-sm"},{default:a(()=>[b(y(t.trackedJob.class),1)]),_:1})]),_:1}),e(m,{top:""},{default:a(()=>[e(p,{lines:"1"},{default:a(()=>{var g;return[x("span",$,y((g=t.trackedJob.alias)!=null?g:t.trackedJob.class),1)]}),_:1}),e(p,{caption:"",lines:"5"},{default:a(()=>[e(n,{count:c(d),label:"Queued",color:"primary"},null,8,["count"]),e(n,{count:c(o),label:"Running",color:"info"},null,8,["count"]),e(n,{count:c(i),label:"Cancelled",color:"warning"},null,8,["count"]),e(n,{count:c(f),label:"Failed",color:"negative"},null,8,["count"]),e(n,{count:c(S),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(m,{top:"",side:""},{default:a(()=>[x("div",z,[e(J,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y=C({__name:"JobListPage",setup(k){const t=w(null);F(()=>{let o=j.jobs.search().bypassAuth().listen().onUpdated(d=>t.value=d).start();N(()=>{o.stop()})});function f(o){return o.class}return(o,d)=>t.value!==null?(u(),_(Q,{key:0,class:"justify-evenly"},{default:a(()=>[e(L,null,{default:a(()=>[e(B,{icon:"list",to:"/jobs",label:"Jobs"})]),_:1}),e(q,{class:"rounded-borders q-pa-lg"},{default:a(()=>[e(p,{header:""},{default:a(()=>[b("All Jobs")]),_:1}),e(h),(u(!0),v(V,null,P(t.value,i=>(u(),v("div",{key:f(i)},[e(A,{"tracked-job":i},null,8,["tracked-job"]),e(h)]))),128))]),_:1})]),_:1})):(u(),_(Q,{key:1,class:"items-center justify-evenly"},{default:a(()=>[b(" Loading ")]),_:1}))}});export{Y as default};
