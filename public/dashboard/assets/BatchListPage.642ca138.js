import{c as R,Q as S,b as U,d as I}from"./index.416c10b7.js";import{Q as o,b as p,c as g,d as z}from"./QItem.8e917815.js";import{h as T}from"./QPagination.6eb9fd1c.js";import{Q as f,R as q}from"./QBtn.e5691bad.js";import{Q as $}from"./QPage.edb823d8.js";import{S as r}from"./StatusCount.c6c9d9e0.js";import{d as m}from"./dayjs.min.96389700.js";import{l as j}from"./localizedFormat.5545e0be.js";import{r as D}from"./relativeTime.c4fed282.js";import{H as F,c as C,I as l,J as i,K as a,d as e,M as _,N as P,U as V,P as x,r as v,w as E,o as H,k as M,Q as u,F as J,R as K,L as G,A}from"./index.02176f2b.js";import"./render.bb221d47.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./position-engine.2625858a.js";import"./selection.02425b78.js";const O={class:"text-weight-medium"},W={class:"text-grey-8 q-gutter-xs"},X=F({__name:"BatchListItem",props:{batch:null},setup(Q){const t=Q;m.extend(D),m.extend(j);const c=C(()=>m().to(t.batch.created_at)),s=C(()=>t.batch.name!==null&&t.batch.name!==""?t.batch.name:"Batch dispatched at "+m(t.batch.created_at).format("L LTS"));return(h,k)=>(l(),i(g,{clickable:"",to:{path:"/batch/"+t.batch.id}},{default:a(()=>[e(o,{avatar:"",top:""},{default:a(()=>[e(f,{name:"group_work",color:"black",size:"34px"})]),_:1}),e(o,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(p,{class:"q-mt-sm"},{default:a(()=>[_(P(V(c)),1)]),_:1})]),_:1}),e(o,{top:""},{default:a(()=>[e(p,{lines:"1"},{default:a(()=>[x("span",O,P(V(s)),1)]),_:1}),e(p,{caption:"",lines:"5"},{default:a(()=>[e(r,{count:t.batch.queued,label:"Queued",color:"primary"},null,8,["count"]),e(r,{count:t.batch.started,label:"Running",color:"info"},null,8,["count"]),e(r,{count:t.batch.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(r,{count:t.batch.failed,label:"Failed",color:"negative"},null,8,["count"]),e(r,{count:t.batch.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(o,{top:"",side:""},{default:a(()=>[x("div",W,[e(f,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y={key:0},Z={class:"q-pa-lg flex flex-center"},ee={key:1},te={key:2},be=F({__name:"BatchListPage",setup(Q){const t=v(null),c=v(1);E(c,(n,b)=>{h()});const s=v(null);function h(){s.value!==null&&s.value.stop(),s.value=R.batches.search().page(c.value).bypassAuth().listen().onUpdated(n=>t.value=n).start()}H(()=>h()),M(()=>{s.value!==null&&s.value.stop()});function k(n){return n.batch_id}return(n,b)=>(l(),i($,{class:"justify-evenly",padding:""},{default:a(()=>[e(U,null,{default:a(()=>[e(S,{icon:"list",to:"/batch",label:"Batches"}),e(S,{to:"/batch",label:"List Batches"})]),_:1}),e(z,{class:"rounded-borders q-pa-lg"},{default:a(()=>{var y,B,L,w,N;return[e(p,{header:""},{default:a(()=>[_("All Batches")]),_:1}),((y=t.value)==null?void 0:y.total)>0?(l(),u("div",Y,[e(I),(l(!0),u(J,null,K((L=(B=t.value)==null?void 0:B.data)!=null?L:[],d=>(l(),u("div",{key:k(d)},[e(X,{batch:d},null,8,["batch"]),e(I)]))),128)),x("div",Z,[((w=t.value)==null?void 0:w.total)>0?(l(),i(T,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":b[0]||(b[0]=d=>c.value=d),max:t.value.last_page},null,8,["model-value","max"])):G("",!0)])])):((N=t.value)==null?void 0:N.total)===0?(l(),u("div",ee,[A((l(),i(g,{clickable:""},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(f,{color:"negative",name:"warning"})]),_:1}),e(o,null,{default:a(()=>[_("No batches found")]),_:1})]),_:1})),[[q]])])):(l(),u("div",te,[A((l(),i(g,{clickable:""},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(f,{color:"primary",name:"sync"})]),_:1}),e(o,null,{default:a(()=>[_("Loading")]),_:1})]),_:1})),[[q]])]))]}),_:1})]),_:1}))}});export{be as default};
